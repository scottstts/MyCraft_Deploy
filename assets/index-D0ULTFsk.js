const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Engine-tjPBtfBP.js","assets/three-CckAHwS8.js","assets/three-examples-61MmgSN1.js","assets/vendor-D7XSisoL.js","assets/react-DUHB38qD.js"])))=>i.map(i=>d[i]);
import{r as w,j as e,R as j,c as xe}from"./react-DUHB38qD.js";import{c as le}from"./vendor-D7XSisoL.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const t of d)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function s(d){const t={};return d.integrity&&(t.integrity=d.integrity),d.referrerPolicy&&(t.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?t.credentials="include":d.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(d){if(d.ep)return;d.ep=!0;const t=s(d);fetch(d.href,t)}})();const be="modulepreload",fe=function(r){return"/"+r},te={},he=function(o,s,l){let d=Promise.resolve();if(s&&s.length>0){let m=function(b){return Promise.all(b.map(y=>Promise.resolve(y).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");d=m(s.map(b=>{if(b=fe(b),b in te)return;te[b]=!0;const y=b.endsWith(".css"),h=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${h}`))return;const v=document.createElement("link");if(v.rel=y?"stylesheet":be,y||(v.as="script"),v.crossOrigin="",v.href=b,c&&v.setAttribute("nonce",c),document.head.appendChild(v),y)return new Promise((B,F)=>{v.addEventListener("load",B),v.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${b}`)))})}))}function t(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return d.then(a=>{for(const c of a||[])c.status==="rejected"&&t(c.reason);return o().catch(t)})},me=[1,2,3,4,5,6,7,8,9],x=le(r=>({selectedSlot:0,setSelectedSlot:o=>r({selectedSlot:Math.max(0,Math.min(8,Math.floor(o)))}),hotbar:me.slice(),setHotbar:o=>r({hotbar:o.slice(0,9)}),fps:0,setFps:o=>r({fps:o}),paused:!1,setPaused:o=>r({paused:o}),inGame:!1,setInGame:o=>r({inGame:o}),debugVisible:!1,setDebugVisible:o=>r({debugVisible:o}),audioVisible:!1,setAudioVisible:o=>r({audioVisible:o}),restartToken:0,bumpRestartToken:()=>r(o=>({restartToken:o.restartToken+1})),gameStarted:!1,setGameStarted:o=>r({gameStarted:o}),chunkCount:9,setChunkCount:o=>r({chunkCount:Math.max(1,Math.floor(o))}),chunkSize:{x:48,y:96,z:48},setChunkSize:o=>r({chunkSize:o}),loading:!1,setLoading:o=>r({loading:o})})),ye="/assets/Away-BS2JoVKP.mp3",ve=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"})),Se="/assets/By%20the%20Sea-luvwhSCO.mp3",we=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"})),je="/assets/Evening%20Glow-BQfsGu53.mp3",ke=Object.freeze(Object.defineProperty({__proto__:null,default:je},Symbol.toStringTag,{value:"Module"})),Ce="/assets/Golden%20Hour-CA9v1wxj.mp3",Be=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"})),Te="/assets/Ocean%20Breeze-D5Vm8F4O.mp3",ze=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"})),Re="/assets/Sand%20Castle-RI8LhXIL.mp3",Ee=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"})),_e="/assets/Serenade-7V3J28-I.mp3",Ie=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"})),Me="/assets/Silhouette-9CC9TX0o.mp3",Fe=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"})),Oe="/assets/Static_Dream-CLQsuaW4.mp3",We=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"})),Ae="/assets/Wind%20Whisper-YpKWmCrS.mp3",Pe=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"})),De=Object.assign({"../assets/sounds/music/Away.mp3":ve,"../assets/sounds/music/By the Sea.mp3":we,"../assets/sounds/music/Evening Glow.mp3":ke,"../assets/sounds/music/Golden Hour.mp3":Be,"../assets/sounds/music/Ocean Breeze.mp3":ze,"../assets/sounds/music/Sand Castle.mp3":Ee,"../assets/sounds/music/Serenade.mp3":Ie,"../assets/sounds/music/Silhouette.mp3":Fe,"../assets/sounds/music/Static_Dream.mp3":We,"../assets/sounds/music/Wind Whisper.mp3":Pe}),Le=Object.entries(De).map(([r,o])=>{const l=((r.split("/").pop()||o.default).replace(/\.[^.]+$/,"")||"Track").replace(/[_-]+/g," ").replace(/\s+/g," ");return{url:o.default,name:l}});let z=null,R=[],O=0,N=!1;function Ne(r){const o=r.slice();for(let s=o.length-1;s>0;s--){const l=Math.floor(Math.random()*(s+1));[o[s],o[l]]=[o[l],o[s]]}return o}function Y(){if(!z||R.length===0)return;const r=R[O%R.length];z.src!==r.url&&(z.src=r.url,z.currentTime=0)}function M(){return z||(R=Ne(Le),O=0,z=new Audio,z.loop=!1,z.volume=.2,z.preload="auto",Y(),z.addEventListener("ended",()=>{R.length!==0&&(O=(O+1)%R.length,Y(),N&&z.play().catch(()=>{}))})),z}function $(r){const o=M();N=r,r?o.play().catch(()=>{}):o.pause()}function de(){const r=M();N&&r.paused&&r.play().catch(()=>{})}function Ge(){M(),R.length!==0&&(O=(O+1)%R.length,Y(),N&&z.play().catch(()=>{}))}function He(){M(),R.length!==0&&(O=(O-1+R.length)%R.length,Y(),N&&z.play().catch(()=>{}))}function H(){return!M().paused}function ne(){return M().currentTime||0}function D(){const r=M();return Number.isFinite(r.duration)?r.duration:0}function re(r){const o=M();Number.isFinite(r)&&(o.currentTime=Math.max(0,Math.min(D()||Number.MAX_SAFE_INTEGER,r)))}function U(){return M(),R.length===0?"":R[O%R.length].name}function oe(r){const o=M(),s=Math.max(0,Math.min(1,r));o.volume=s}function ae(){return M().volume}async function Ue(){return(await he(()=>import("./Engine-tjPBtfBP.js"),__vite__mapDeps([0,1,2,3,4]))).engine}function Ve(){const r=w.useRef(null),o=x(c=>c.setPaused),s=x(c=>c.setInGame),l=x(c=>c.restartToken),d=x(c=>c.gameStarted);w.useEffect(()=>{let c=null,m=!0,b=null;return(async()=>{const h=r.current;if(!h||!m||!d)return;c=await Ue(),await c.start(h),s(!1);const v=()=>{};window.addEventListener("resize",v),b=()=>{window.removeEventListener("resize",v)}})(),()=>{m=!1,o(!1),b&&b(),c?.stop()}},[l,o,s,d]);const t=c=>c.preventDefault(),a=()=>{const c=r.current;c&&(document.pointerLockElement!==c&&c.requestPointerLock(),d&&(de(),window.__primeSfx?.()))};return e.jsx("div",{style:{position:"fixed",inset:0,background:"#0b0d10"},children:e.jsx("canvas",{ref:r,onContextMenu:t,onClick:a,style:{width:"100%",height:"100%",display:"block"}})})}const Ye=9,J=1/0;function $e(){return Array.from({length:Ye},()=>({blockId:null,count:0}))}const P=le((r,o)=>({slots:$e(),add:(s,l=1)=>{if(s<=0||l<=0)return l;const d=o().slots.slice();let t=l;for(let a=0;a<d.length&&t>0;a++){const c=d[a];if(c.blockId===s&&c.count<J){const m=Math.min(J-c.count,t);c.count+=m,t-=m}}for(let a=0;a<d.length&&t>0;a++){const c=d[a];if(c.blockId===null||c.count===0){const m=Math.min(J,t);c.blockId=s,c.count=m,t-=m}}return r({slots:d}),t},consumeFromSelected:(s=1)=>{if(s<=0)return 0;const l=o().slots.slice(),d=x.getState().selectedSlot,t=l[d];if(!t||!t.blockId||t.count<=0)return 0;const a=Math.min(t.count,s);return t.count-=a,t.count===0&&(t.blockId=null),r({slots:l}),a},getSelectedBlockId:()=>{const s=x.getState().selectedSlot,l=o().slots[s];return!l||!l.blockId||l.count<=0?null:l.blockId},clearSelectedIfEmpty:()=>{const s=o().slots.slice(),l=x.getState().selectedSlot,d=s[l];d&&d.count<=0&&(d.blockId=null),r({slots:s})}}));function zt(r,o=1){return P.getState().add(r,o)}function Rt(){return P.getState().getSelectedBlockId()}function Et(){return P.getState().consumeFromSelected(1)===1}function _t(){return P.getState().slots.map(r=>({blockId:r.blockId,count:r.count}))}function se(r){const o=Array.from({length:9},(s,l)=>{const d=r[l];if(!d||typeof d!="object")return{blockId:null,count:0};const t=d.blockId===null||typeof d.blockId=="number"?d.blockId:null,a=Math.max(0,Math.floor(Number.isFinite(d.count)?d.count:0));return{blockId:t,count:a}});P.setState({slots:o})}const qe="/assets/grass-DpbbaMGp.png",Ke="/assets/dirt-DqnIcsTT.png",Je="/assets/cobblestone-bSPKa8EI.png",Xe="/assets/sand-Dwllyi-m.png",Ze="/assets/wood-Br2imn7P.png",Qe="/assets/branch-BMHqvNwM.png",et="/assets/maple_branch-Bz-RRJzN.png",tt="/assets/grass_leaves_icon-D13aQOUF.png",nt="/assets/water-aOZMc5Uy.png",rt={1:qe,2:Ke,3:Je,4:Xe,5:nt,6:Ze,7:Qe,8:et,9:tt};function ot(){const r=x(l=>l.selectedSlot),o=x(l=>l.gameStarted),s=P(l=>l.slots);return o?e.jsx("div",{style:{position:"absolute",bottom:24,left:"50%",transform:"translateX(-50%)",display:"flex",gap:4,padding:4,background:"rgba(0,0,0,0.25)",borderRadius:6},children:s.map((l,d)=>{const t=d===r,a=l.blockId?rt[l.blockId]:void 0;return e.jsxs("div",{style:{width:44,height:44,boxSizing:"border-box",border:"2px solid",borderColor:t?"#cfe9ef":"#555",background:"#6b6e63",boxShadow:t?"0 0 0 2px #1a1a1a inset":"0 0 0 1px #2a2a2a inset",position:"relative"},children:[a&&e.jsx("img",{src:a,alt:"",style:{width:32,height:32,imageRendering:"pixelated",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),e.jsx("div",{style:{position:"absolute",left:2,top:1,fontSize:10,color:"#ffd700",textShadow:"1px 1px 0 #000",fontWeight:"bold"},children:d+1}),l.count>0&&e.jsx("div",{style:{position:"absolute",right:2,bottom:0,fontSize:10,color:"#fff",textShadow:"1px 1px 0 #000"},children:l.count})]},d)})}):null}function at(){const r=x(l=>l.gameStarted),o=14,s=2;return r?e.jsxs("div",{style:{position:"absolute",left:"50%",top:"50%",pointerEvents:"none"},children:[e.jsx("div",{style:{position:"absolute",width:o,height:s,background:"#fff",transform:"translate(-50%, -50%)"}}),e.jsx("div",{style:{position:"absolute",width:s,height:o,background:"#fff",transform:"translate(-50%, -50%)"}})]}):null}function st(){const r=x(y=>y.fps),o=x(y=>y.gameStarted),[s,l]=j.useState(0);j.useEffect(()=>{let y=0;const h=()=>{const v=window.getGraphicsSettings;if(v){const B=v();B&&B.timeOfDay&&l(B.timeOfDay.t)}y=requestAnimationFrame(h)};return y=requestAnimationFrame(h),()=>cancelAnimationFrame(y)},[]);const d=(6+s*24)%12,t=d%1*60,a=d/12*360,c=t/60*360,m=36,b=m/2;return o?e.jsxs("div",{id:"top-right-widget",style:{position:"absolute",right:12,top:12,display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"linear-gradient(90deg, rgba(32,39,49,0.95), rgba(22,27,35,0.95))",color:"#f8f9fa",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"12px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:600,letterSpacing:.3,pointerEvents:"none",backdropFilter:"blur(10px)",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",zIndex:1001},children:[e.jsx("span",{style:{opacity:.8},children:"Press P to pause"}),e.jsx("div",{style:{width:"1px",height:"16px",background:"rgba(255,255,255,0.2)"}}),e.jsxs("span",{style:{color:"#4ade80",fontWeight:700,minWidth:"48px",textAlign:"center"},children:[r," fps"]}),e.jsx("div",{style:{width:"1px",height:"16px",background:"rgba(255,255,255,0.2)"}}),e.jsxs("div",{style:{width:m,height:m,borderRadius:"50%",border:"2px solid rgba(255,255,255,0.4)",background:"rgba(0,0,0,0.2)",position:"relative",flexShrink:0},children:[e.jsx("div",{style:{position:"absolute",left:b-1.5,top:b-8,width:3,height:8,background:"#fff",transformOrigin:"50% 100%",transform:`rotate(${a}deg)`,borderRadius:2}}),e.jsx("div",{style:{position:"absolute",left:b-.5,top:b-12,width:1,height:12,background:"#dde6ff",transformOrigin:"50% 100%",transform:`rotate(${c}deg)`,borderRadius:1}}),e.jsx("div",{style:{position:"absolute",left:b-1.5,top:b-1.5,width:3,height:3,background:"#fff",borderRadius:"50%"}})]})]}):null}function it(){const r=x(a=>a.paused),o=x(a=>a.setPaused),s=x(a=>a.bumpRestartToken),l=x(a=>a.inGame),d=x(a=>a.setGameStarted),t=x(a=>a.setLoading);return r?e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.75)",backdropFilter:"blur(20px)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:e.jsxs("div",{style:{width:420,padding:32,background:"linear-gradient(90deg, rgba(32,39,49,0.95), rgba(22,27,35,0.95))",borderRadius:16,color:"#f8f9fa",boxShadow:"0 20px 60px rgba(0,0,0,0.7), 0 8px 32px rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:24,paddingBottom:16,borderBottom:"1px solid rgba(255,255,255,0.06)"},children:e.jsx("div",{style:{fontSize:28,fontWeight:800,letterSpacing:-.5,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Game Paused"})}),e.jsxs("div",{style:{display:"flex",gap:16},children:[e.jsx("button",{onClick:()=>o(!1),style:{flex:1,padding:"16px 24px",background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"#fff",border:"none",borderRadius:12,cursor:"pointer",fontWeight:700,fontSize:14,letterSpacing:.5,textTransform:"uppercase",boxShadow:"0 8px 24px rgba(79,172,254,0.4)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none"},onMouseOver:a=>{a.currentTarget.style.transform="translateY(-2px)",a.currentTarget.style.boxShadow="0 12px 32px rgba(79,172,254,0.5)"},onMouseOut:a=>{a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="0 8px 24px rgba(79,172,254,0.4)"},children:"Resume"}),e.jsx("button",{onClick:async()=>{t(!0);try{const a=window;if(typeof a.showSaveFilePicker=="function")try{const c=`mycraft-world-${new Date().toISOString().replace(/[:.]/g,"-").replace("T","_").replace("Z","")}.json`,m=await a.showSaveFilePicker({suggestedName:c,types:[{description:"MyCraft World (JSON)",accept:{"application/json":[".json"]}}]});a.__nextSaveFileHandle=m}catch(c){const m=c?.name;if(m==="AbortError"||m==="NotAllowedError"){t(!1);return}console.warn("Save picker failed; falling back to default download.",c)}window.__saveWorld?.(),await new Promise(c=>setTimeout(c,500))}catch(a){console.error("Save failed:",a)}finally{t(!1)}},style:{flex:1,padding:"16px 24px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",borderRadius:12,cursor:"pointer",fontWeight:700,fontSize:14,letterSpacing:.5,textTransform:"uppercase",boxShadow:"0 8px 24px rgba(16,185,129,0.4)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none"},onMouseOver:a=>{a.currentTarget.style.transform="translateY(-2px)",a.currentTarget.style.boxShadow="0 12px 32px rgba(16,185,129,0.5)"},onMouseOut:a=>{a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="0 8px 24px rgba(16,185,129,0.4)"},children:"Save"}),e.jsx("button",{onClick:()=>{d(!1),s(),o(!1)},style:{flex:1,padding:"16px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff",border:"none",borderRadius:12,cursor:"pointer",fontWeight:700,fontSize:14,letterSpacing:.5,textTransform:"uppercase",boxShadow:"0 8px 24px rgba(102,126,234,0.4)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none"},onMouseOver:a=>{a.currentTarget.style.transform="translateY(-2px)",a.currentTarget.style.boxShadow="0 12px 32px rgba(102,126,234,0.5)"},onMouseOut:a=>{a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="0 8px 24px rgba(102,126,234,0.4)"},children:"Restart"})]}),!l&&e.jsx("div",{style:{marginTop:20,fontSize:12,color:"#64748b",textAlign:"center",fontStyle:"italic",lineHeight:1.4},children:"Click the canvas to enter the game and gain camera control."})]})}):null}const lt=()=>{const r=x(f=>f.gameStarted),o=j.useRef(null),[s,l]=j.useState(!1),[d,t]=j.useState(0),[a,c]=j.useState(0),[m,b]=j.useState(""),[y,h]=j.useState(0),[v,B]=j.useState(84),[F,I]=j.useState(void 0),[i,C]=j.useState(!1),[W,E]=j.useState(!1);return j.useEffect(()=>{try{l(H())}catch{}try{t(ne()),c(D()),b(U()),h(ae())}catch{}},[]),j.useEffect(()=>{let f=0;const u=()=>{const n=ne(),g=D(),p=H(),T=U(),k=ae();t(n),c(g),l(p),b(T),h(k),f=requestAnimationFrame(u)};return f=requestAnimationFrame(u),()=>cancelAnimationFrame(f)},[]),j.useEffect(()=>{const f=()=>{const g=document.getElementById("top-right-widget");if(!g)return;const p=g.getBoundingClientRect();Number.isFinite(p.bottom)&&B(Math.ceil(p.bottom+12)),Number.isFinite(p.width)&&p.width>0&&I(Math.ceil(p.width))};f();const u=requestAnimationFrame(f);window.addEventListener("resize",f);const n=window.setInterval(f,100);return()=>{window.removeEventListener("resize",f),window.clearInterval(n),cancelAnimationFrame(u)}},[]),j.useEffect(()=>{const f=n=>{if(i){const g=document.querySelector("[data-progress-bar]");if(g){const p=g.getBoundingClientRect(),T=Math.min(1,Math.max(0,(n.clientX-p.left)/p.width)),k=D();k>0&&re(T*k)}}if(W){const g=document.querySelector("[data-volume-bar]");if(g){const p=g.getBoundingClientRect(),T=Math.min(1,Math.max(0,(n.clientX-p.left)/p.width));oe(T),h(T)}}},u=()=>{C(!1),E(!1)};if(i||W)return document.addEventListener("mousemove",f),document.addEventListener("mouseup",u),()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",u)}},[i,W]),!r||F===void 0?null:e.jsx("div",{ref:o,style:{position:"fixed",right:12,top:v,width:F,minWidth:0,boxSizing:"border-box",overflow:"hidden",background:"linear-gradient(90deg, rgba(32,39,49,0.95), rgba(22,27,35,0.95))",border:"1px solid rgba(255,255,255,0.06)",borderRadius:"12px",padding:"8px 12px",color:"#ffffff",fontSize:"14px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',zIndex:1001,pointerEvents:"auto",backdropFilter:"blur(24px)",boxShadow:"0 4px 16px rgba(0,0,0,0.3)"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",minWidth:0},children:[e.jsx("div",{style:{alignSelf:"flex-start",fontSize:13,fontWeight:800,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:-.2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},children:m||"—"}),e.jsx("div",{"data-progress-bar":!0,onClick:f=>{const u=f.currentTarget.getBoundingClientRect(),n=Math.min(1,Math.max(0,(f.clientX-u.left)/u.width)),g=D();g>0&&re(n*g)},onMouseDown:f=>{f.preventDefault(),C(!0)},style:{width:"100%",height:"8px",borderRadius:"6px",background:"rgba(255,255,255,0.12)",cursor:"pointer",position:"relative"},children:e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${a>0?Math.min(1,d/a)*100:0}%`,background:"linear-gradient(90deg, rgba(148,163,184,0.9), rgba(99,102,241,0.9))",borderRadius:"6px"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",minWidth:0},children:[e.jsx("button",{"aria-label":"Previous track",onClick:()=>{He(),l(H()),b(U())},style:{padding:"6px 8px",background:"transparent",border:"none",color:"#e2e8f0",cursor:"pointer",fontSize:"22px"},children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:e.jsx("path",{d:"M18 7v10l-6-5 6-5zM10 7v10L4 12l6-5z"})})}),e.jsx("button",{"aria-label":s?"Pause":"Play",onClick:()=>{s?($(!1),l(!1)):($(!0),de(),l(!0))},style:{padding:"6px 8px",background:"transparent",border:"none",color:"#e2e8f0",cursor:"pointer",fontSize:"26px"},children:s?e.jsx("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:e.jsx("path",{d:"M6 5h4v14H6zM14 5h4v14h-4z"})}):e.jsx("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:e.jsx("path",{d:"M8 5v14l11-7-11-7z"})})}),e.jsx("button",{"aria-label":"Next track",onClick:()=>{Ge(),l(H()),b(U())},style:{padding:"6px 8px",background:"transparent",border:"none",color:"#e2e8f0",cursor:"pointer",fontSize:"22px"},children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:e.jsx("path",{d:"M6 7v10l6-5-6-5zm8 0v10l6-5-6-5z"})})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"1px",minWidth:0},children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",style:{color:"#94a3b8",flexShrink:0},children:e.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"})}),e.jsx("div",{"data-volume-bar":!0,onClick:f=>{const u=f.currentTarget.getBoundingClientRect(),n=Math.min(1,Math.max(0,(f.clientX-u.left)/u.width));oe(n),h(n)},onMouseDown:f=>{f.preventDefault(),E(!0)},style:{flex:1,height:"6px",borderRadius:"4px",background:"rgba(255,255,255,0.12)",cursor:"pointer",position:"relative",minWidth:0},children:e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${y*100}%`,background:"linear-gradient(90deg, rgba(148,163,184,0.7), rgba(99,102,241,0.7))",borderRadius:"4px"}})}),e.jsxs("span",{style:{fontSize:"11px",color:"#94a3b8",minWidth:"28px",textAlign:"right"},children:[Math.round(y*100),"%"]})]})]})})};function dt(){const r=x(s=>s.setLoading);return x(s=>s.gameStarted)?e.jsxs("button",{onClick:async()=>{r(!0);try{const s=window;if(typeof s.showSaveFilePicker=="function")try{const l=`mycraft-world-${new Date().toISOString().replace(/[:.]/g,"-").replace("T","_").replace("Z","")}.json`,d=await s.showSaveFilePicker({suggestedName:l,types:[{description:"MyCraft World (JSON)",accept:{"application/json":[".json"]}}]});s.__nextSaveFileHandle=d}catch(l){const d=l?.name;if(d==="AbortError"||d==="NotAllowedError"){r(!1);return}console.warn("Save picker failed; falling back to default download.",l)}window.__saveWorld?.(),await new Promise(l=>setTimeout(l,500))}catch(s){console.error("Save failed:",s)}finally{r(!1)}},style:{padding:"8px 12px",background:"linear-gradient(145deg, rgba(32,39,49,0.95), rgba(22,27,35,0.95))",color:"#f8f9fa",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",cursor:"pointer",fontSize:"12px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:600,letterSpacing:.3,pointerEvents:"auto",backdropFilter:"blur(10px)",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",width:"fit-content"},onMouseOver:s=>{s.currentTarget.style.transform="translateY(-2px)",s.currentTarget.style.boxShadow="0 8px 32px rgba(147,51,234,0.4), 0 4px 16px rgba(0,0,0,0.4)",s.currentTarget.style.borderColor="rgba(147,51,234,0.4)",s.currentTarget.style.background="linear-gradient(145deg, rgba(42,49,59,0.98), rgba(32,37,45,0.98))"},onMouseOut:s=>{s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.3)",s.currentTarget.style.borderColor="rgba(255,255,255,0.1)",s.currentTarget.style.background="linear-gradient(145deg, rgba(32,39,49,0.95), rgba(22,27,35,0.95))"},children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",style:{marginRight:"6px",flexShrink:0},children:e.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z",fill:"currentColor",opacity:"0.8"})}),"Save World"]}):null}const ct=()=>{const{debugVisible:r,setDebugVisible:o,setAudioVisible:s}=x(),l=x(n=>n.gameStarted),d=j.useRef(null),[t,a]=w.useState({ssaoEnabled:!0,ssaoIntensity:.35,ssaoRadius:.2,bloomEnabled:!0,bloomStrength:.3,bloomThreshold:.05,exposure:.9,contrast:1.15,saturation:1.1,shadowEnabled:!0,shadowResolution:1024,shadowDistance:300,shadowSoftness:1,shadowIntensity:1,shadowBias:5e-4,shadowNormalBias:.02,shadowBlendFraction:.2,shadowBlendMin:3,fogEnabled:!0,fogBaseDensity:.002,fogMaxDistance:600,volumetricsEnabled:!1,volumetricsIntensity:.1,volumetricsSteps:32}),[c,m]=w.useState(!1),[b,y]=w.useState(.45),[h,v]=w.useState(.65),[B,F]=w.useState(.7),[I,i]=w.useState(0),[C,W]=w.useState(!1),[E,f]=w.useState(180);if(w.useEffect(()=>{let n=0;const g=()=>{const p=window.getGraphicsSettings;if(p){const k=p().timeOfDay.t;typeof k=="number"&&!Number.isNaN(k)&&i(S=>Math.abs(S-k)>1e-4?k:S)}n=requestAnimationFrame(g)};return n=requestAnimationFrame(g),()=>cancelAnimationFrame(n)},[]),w.useEffect(()=>{try{const g=window.__getSfxVolume?.();typeof g=="number"&&!Number.isNaN(g)&&F(g)}catch{}const n=setTimeout(()=>{const g=window.updatePostProcessingSettings;g&&g(t);const p=window.updateShadowSettings;if(p){const T={enabled:t.shadowEnabled,resolution:t.shadowResolution,cascades:3,shadowDistance:t.shadowDistance,softness:t.shadowSoftness,bias:t.shadowBias,normalBias:t.shadowNormalBias,intensity:t.shadowIntensity,shadowBlendFraction:t.shadowBlendFraction,shadowBlendMin:t.shadowBlendMin};p(T)}window.updateGraphicsSettings?.({timeOfDay:{t:I,paused:C,cycleSeconds:E},renderer:{exposure:t.exposure}})},1e3);return()=>clearTimeout(n)},[]),w.useEffect(()=>{window.updateGraphicsSettings?.({timeOfDay:{t:I,paused:C,cycleSeconds:E},clouds:{enabled:c,coverage:b,density:h}})},[c,b,h,I,C,E]),j.useEffect(()=>{if(!r)return;const n=g=>{const p=d.current;p&&(p.contains(g.target)||o(!1))};return document.addEventListener("mousedown",n,!0),()=>document.removeEventListener("mousedown",n,!0)},[r,o]),j.useEffect(()=>{r&&s(!1)},[r,s]),!l)return null;if(!r)return e.jsxs("div",{style:{position:"fixed",top:"12px",left:"12px",zIndex:1e3,display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("button",{onClick:()=>{s(!1),o(!0)},style:{padding:"8px 12px",background:"linear-gradient(145deg, rgba(32,39,49,0.95), rgba(22,27,35,0.95))",color:"#f8f9fa",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",cursor:"pointer",fontSize:"12px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:600,letterSpacing:.3,pointerEvents:"auto",backdropFilter:"blur(10px)",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",width:"fit-content"},onMouseOver:n=>{n.currentTarget.style.transform="translateY(-2px)",n.currentTarget.style.boxShadow="0 8px 32px rgba(79,172,254,0.4), 0 4px 16px rgba(0,0,0,0.4)",n.currentTarget.style.borderColor="rgba(79,172,254,0.4)",n.currentTarget.style.background="linear-gradient(145deg, rgba(42,49,59,0.98), rgba(32,37,45,0.98))"},onMouseOut:n=>{n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.3)",n.currentTarget.style.borderColor="rgba(255,255,255,0.1)",n.currentTarget.style.background="linear-gradient(145deg, rgba(32,39,49,0.95), rgba(22,27,35,0.95))"},children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",style:{marginRight:"6px",flexShrink:0},children:e.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z",fill:"currentColor",opacity:"0.8"})}),"Settings"]}),e.jsx(dt,{})]});const u=(n,g)=>{const p={...t,[n]:g};a(p);const T=window.updatePostProcessingSettings;T?T(p):console.error("[DebugPanel] updatePostProcessingSettings not available!");const k=window.updateShadowSettings;if(k){const S={enabled:p.shadowEnabled,resolution:p.shadowResolution,cascades:3,shadowDistance:p.shadowDistance,softness:p.shadowSoftness,bias:p.shadowBias,normalBias:p.shadowNormalBias,intensity:p.shadowIntensity,shadowBlendFraction:p.shadowBlendFraction,shadowBlendMin:p.shadowBlendMin};k(S)}else console.error("[DebugPanel] updateShadowSettings not available!");if(n==="exposure"){const S=window.updateGraphicsSettings;S?(S({timeOfDay:{t:I,paused:C,cycleSeconds:E},renderer:{exposure:p.exposure}}),console.log("[DebugPanel] Updated graphics settings for exposure")):console.error("[DebugPanel] updateGraphicsSettings not available!")}};return e.jsxs("div",{ref:d,style:{position:"fixed",top:"52px",left:"12px",width:"320px",background:"linear-gradient(145deg, rgba(32,39,49,0.98), rgba(22,27,35,0.98))",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",padding:"20px",color:"#f8f9fa",fontSize:"13px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',zIndex:2e3,maxHeight:"80vh",overflowY:"auto",backdropFilter:"blur(20px)",boxShadow:"0 20px 60px rgba(0,0,0,0.7), 0 8px 32px rgba(0,0,0,0.4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"16px",borderBottom:"1px solid rgba(255,255,255,0.06)",position:"sticky",top:0,background:"linear-gradient(145deg, rgba(32,39,49,0.98), rgba(22,27,35,0.98))",zIndex:1},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:700,background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Settings"}),e.jsx("button",{onClick:()=>o(!1),style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05))",border:"1px solid rgba(255,255,255,0.1)",color:"#f8f9fa",cursor:"pointer",padding:"8px 10px",borderRadius:"8px",fontSize:"14px",fontWeight:600,transition:"all 0.2s ease",outline:"none"},onMouseOver:n=>{n.currentTarget.style.background="linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08))",n.currentTarget.style.borderColor="rgba(255,255,255,0.2)"},onMouseOut:n=>{n.currentTarget.style.background="linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05))",n.currentTarget.style.borderColor="rgba(255,255,255,0.1)"},children:"✕"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#e2e8f0",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,borderBottom:"1px solid rgba(255,255,255,0.06)",paddingBottom:"6px"},children:"Sound Effects"}),e.jsxs("label",{style:{display:"block",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Sound Effects Volume"}),e.jsxs("span",{style:{color:"#e2e8f0"},children:[Math.round(B*100),"%"]})]}),e.jsx("input",{type:"range",min:0,max:1,step:.01,value:B,onChange:n=>{const g=parseFloat(n.target.value);F(g),window.__setSfxVolume?.(g)},style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#e2e8f0",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,borderBottom:"1px solid rgba(255,255,255,0.06)",paddingBottom:"6px"},children:"Day/Night Cycle"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"10px",cursor:"pointer",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("input",{type:"checkbox",checked:C,onChange:n=>{const g=n.target.checked;W(g),window.updateGraphicsSettings?.({timeOfDay:{t:I,paused:g,cycleSeconds:E},renderer:{exposure:t.exposure}})},style:{marginRight:"10px",transform:"scale(1.1)"}}),e.jsx("span",{style:{fontWeight:500},children:"Pause Cycle"})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Time"}),e.jsx("span",{style:{color:"#e2e8f0"},children:I.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:I,onChange:n=>{const g=parseFloat(n.target.value);i(g),window.updateGraphicsSettings?.({timeOfDay:{t:g,paused:C,cycleSeconds:E},renderer:{exposure:t.exposure}})},style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Cycle Length (s)"}),e.jsx("span",{style:{color:"#e2e8f0"},children:E})]}),e.jsx("input",{type:"range",min:"30",max:"600",step:"10",value:E,onChange:n=>{const g=parseInt(n.target.value,10);f(g),window.updateGraphicsSettings?.({timeOfDay:{t:I,paused:C,cycleSeconds:g},renderer:{exposure:t.exposure}})},style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#e2e8f0",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,borderBottom:"1px solid rgba(255,255,255,0.06)",paddingBottom:"6px"},children:"Screen Space Ambient Occlusion"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"10px",cursor:"pointer",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.06)",transition:"all 0.2s ease"},children:[e.jsx("input",{type:"checkbox",checked:t.ssaoEnabled,onChange:n=>u("ssaoEnabled",n.target.checked),style:{marginRight:"10px",transform:"scale(1.1)"}}),e.jsx("span",{style:{fontWeight:500},children:"Enable SSAO"})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",opacity:t.ssaoEnabled?1:.5,padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Intensity"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.ssaoIntensity.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:t.ssaoIntensity,onChange:n=>u("ssaoIntensity",parseFloat(n.target.value)),disabled:!t.ssaoEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",opacity:t.ssaoEnabled?1:.5,padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Radius"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.ssaoRadius.toFixed(3)})]}),e.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.01",value:t.ssaoRadius,onChange:n=>u("ssaoRadius",parseFloat(n.target.value)),disabled:!t.ssaoEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#e2e8f0",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,borderBottom:"1px solid rgba(255,255,255,0.06)",paddingBottom:"6px"},children:"Bloom Effects"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"10px",cursor:"pointer",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.06)",transition:"all 0.2s ease"},children:[e.jsx("input",{type:"checkbox",checked:t.bloomEnabled,onChange:n=>u("bloomEnabled",n.target.checked),style:{marginRight:"10px",transform:"scale(1.1)"}}),e.jsx("span",{style:{fontWeight:500},children:"Enable Bloom"})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",opacity:t.bloomEnabled?1:.5,padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Strength"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.bloomStrength.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:t.bloomStrength,onChange:n=>u("bloomStrength",parseFloat(n.target.value)),disabled:!t.bloomEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",opacity:t.bloomEnabled?1:.5,padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Threshold"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.bloomThreshold.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0",max:"0.8",step:"0.05",value:t.bloomThreshold,onChange:n=>u("bloomThreshold",parseFloat(n.target.value)),disabled:!t.bloomEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#e2e8f0",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,borderBottom:"1px solid rgba(255,255,255,0.06)",paddingBottom:"6px"},children:"Dynamic Shadows"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"10px",cursor:"pointer",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.06)",transition:"all 0.2s ease"},children:[e.jsx("input",{type:"checkbox",checked:t.shadowEnabled,onChange:n=>u("shadowEnabled",n.target.checked),style:{marginRight:"10px",transform:"scale(1.1)"}}),e.jsx("span",{style:{fontWeight:500},children:"Enable Shadows"})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",opacity:t.shadowEnabled?1:.5,padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Distance"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.shadowDistance})]}),e.jsx("input",{type:"range",min:"50",max:"2000",step:"10",value:t.shadowDistance,onChange:n=>u("shadowDistance",parseFloat(n.target.value)),disabled:!t.shadowEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",opacity:t.shadowEnabled?1:.5,padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Intensity"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.shadowIntensity.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:t.shadowIntensity,onChange:n=>u("shadowIntensity",parseFloat(n.target.value)),disabled:!t.shadowEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",opacity:t.shadowEnabled?1:.5,padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Blend Fraction"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.shadowBlendFraction.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0",max:"5",step:"0.05",value:t.shadowBlendFraction,onChange:n=>u("shadowBlendFraction",parseFloat(n.target.value)),disabled:!t.shadowEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",opacity:t.shadowEnabled?1:.5,padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Blend Min (units)"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.shadowBlendMin.toFixed(1)})]}),e.jsx("input",{type:"range",min:"0",max:"50",step:"1",value:t.shadowBlendMin,onChange:n=>u("shadowBlendMin",parseFloat(n.target.value)),disabled:!t.shadowEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",opacity:t.shadowEnabled?1:.5,padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Bias"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.shadowBias.toFixed(5)})]}),e.jsx("input",{type:"range",min:"0",max:"0.002",step:"0.0001",value:t.shadowBias,onChange:n=>u("shadowBias",parseFloat(n.target.value)),disabled:!t.shadowEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",opacity:t.shadowEnabled?1:.5,padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Normal Bias"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.shadowNormalBias.toFixed(3)})]}),e.jsx("input",{type:"range",min:"0",max:"0.1",step:"0.001",value:t.shadowNormalBias,onChange:n=>u("shadowNormalBias",parseFloat(n.target.value)),disabled:!t.shadowEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#e2e8f0",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,borderBottom:"1px solid rgba(255,255,255,0.06)",paddingBottom:"6px"},children:"Height Fog"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"10px",cursor:"pointer",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("input",{type:"checkbox",checked:!!t.fogEnabled,onChange:n=>u("fogEnabled",n.target.checked),style:{marginRight:"10px",transform:"scale(1.1)"}}),e.jsx("span",{style:{fontWeight:500},children:"Enable Fog"})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)",opacity:t.fogEnabled?1:.5},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Base Density"}),e.jsx("span",{style:{color:"#e2e8f0"},children:(t.fogBaseDensity??0).toFixed(4)})]}),e.jsx("input",{type:"range",min:"0",max:"0.01",step:"0.0005",value:t.fogBaseDensity??0,onChange:n=>u("fogBaseDensity",parseFloat(n.target.value)),disabled:!t.fogEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)",opacity:t.fogEnabled?1:.5},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Max Distance"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.fogMaxDistance})]}),e.jsx("input",{type:"range",min:"50",max:"2000",step:"10",value:t.fogMaxDistance??600,onChange:n=>u("fogMaxDistance",parseFloat(n.target.value)),disabled:!t.fogEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#e2e8f0",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,borderBottom:"1px solid rgba(255,255,255,0.06)",paddingBottom:"6px"},children:"Volumetric Lighting"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"10px",cursor:"pointer",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("input",{type:"checkbox",checked:!!t.volumetricsEnabled,onChange:n=>u("volumetricsEnabled",n.target.checked),style:{marginRight:"10px",transform:"scale(1.1)"}}),e.jsx("span",{style:{fontWeight:500},children:"Enable Volumetrics"})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)",opacity:t.volumetricsEnabled?1:.5},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Intensity"}),e.jsx("span",{style:{color:"#e2e8f0"},children:(t.volumetricsIntensity??0).toFixed(2)})]}),e.jsx("input",{type:"range",min:"0",max:"2",step:"0.05",value:t.volumetricsIntensity??.5,onChange:n=>u("volumetricsIntensity",parseFloat(n.target.value)),disabled:!t.volumetricsEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)",opacity:t.volumetricsEnabled?1:.5},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Steps"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.volumetricsSteps})]}),e.jsx("input",{type:"range",min:"8",max:"64",step:"1",value:t.volumetricsSteps??32,onChange:n=>u("volumetricsSteps",parseInt(n.target.value,10)),disabled:!t.volumetricsEnabled,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#e2e8f0",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,borderBottom:"1px solid rgba(255,255,255,0.06)",paddingBottom:"6px"},children:"Clouds"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"10px",cursor:"pointer",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("input",{type:"checkbox",checked:c,onChange:n=>m(n.target.checked),style:{marginRight:"10px",transform:"scale(1.1)"}}),e.jsx("span",{style:{fontWeight:500},children:"Enable Clouds"})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)",opacity:c?1:.5},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Coverage"}),e.jsx("span",{style:{color:"#e2e8f0"},children:b.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:b,onChange:n=>{const g=parseFloat(n.target.value);y(g)},disabled:!c,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)",opacity:c?1:.5},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Density"}),e.jsx("span",{style:{color:"#e2e8f0"},children:h.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:h,onChange:n=>{const g=parseFloat(n.target.value);v(g)},disabled:!c,style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#e2e8f0",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,borderBottom:"1px solid rgba(255,255,255,0.06)",paddingBottom:"6px"},children:"Color Grading"}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Exposure"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.exposure.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.05",value:t.exposure,onChange:n=>u("exposure",parseFloat(n.target.value)),style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Contrast"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.contrast.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.05",value:t.contrast,onChange:n=>u("contrast",parseFloat(n.target.value)),style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]}),e.jsxs("label",{style:{display:"block",marginBottom:"12px",padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:[e.jsx("span",{children:"Saturation"}),e.jsx("span",{style:{color:"#e2e8f0"},children:t.saturation.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.05",value:t.saturation,onChange:n=>u("saturation",parseFloat(n.target.value)),style:{width:"100%",height:"4px",borderRadius:"2px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer"}})]})]})]})},pt="MC-HMAC-SHA256-v1",gt="MyCraft-Local-Signing-Key-v1",ut="mycraft.local.secret.v1.very-insecure",xt="MC-AES-GCM-256-v1",bt="a1c3f5b7d9e2c4a6b8d0f2e4c6a8b0d2a4c6e8f0b2d4f6a8c0e2f4a6c8e0f2a4";function X(r){return JSON.stringify(r)}function Z(r){return new TextEncoder().encode(r)}function q(r){let o="";for(let s=0;s<r.length;s++)o+=String.fromCharCode(r[s]);return btoa(o)}function L(r){const o=atob(r),s=new Uint8Array(o.length);for(let l=0;l<o.length;l++)s[l]=o.charCodeAt(l);return s}async function ce(){const r=new TextEncoder().encode(ut);return crypto.subtle.importKey("raw",r,{name:"HMAC",hash:"SHA-256"},!1,["sign","verify"])}async function It(r){const o=await ce(),s=Z(X(r)),l=await crypto.subtle.sign("HMAC",o,s);return q(new Uint8Array(l))}async function ft(r,o){const s=await ce(),l=Z(X(r)),d=L(o);return crypto.subtle.verify("HMAC",s,d,l)}function ht(r){const o=r.replace(/[^0-9a-f]/gi,""),s=new Uint8Array(o.length/2);for(let l=0;l<o.length;l+=2)s[l/2]=parseInt(o.substr(l,2),16);return s}async function pe(){const r=ht(bt);return crypto.subtle.importKey("raw",r,{name:"AES-GCM"},!1,["encrypt","decrypt"])}async function Mt(r){const o=await pe(),s=crypto.getRandomValues(new Uint8Array(12)),l=Z(X(r)),d=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},o,l);return{ivB64:q(s),cipherB64:q(new Uint8Array(d))}}async function mt(r,o){const s=await pe(),l=L(r),d=L(o),t=await crypto.subtle.decrypt({name:"AES-GCM",iv:l},s,d),a=new TextDecoder().decode(t);return JSON.parse(a)}const A={x:48,y:96,z:48},Ft={height:1.8,width:.6,speed:{walk:4,sprint:6},jump:8,gravity:-24,swim:{accel:14,verticalAccel:12,drag:3.2,maxSpeed:3.6,sprintMultiplier:1.5,gravityScale:.18,floatBand:1.25,floatStrength:4,surfaceSnapStrength:10,sinkBias:.6,maxEmergeStepOut:2.8,stepOutHeadroom:1.01,emergeLiftSpeed:6,emergeNudgeSpeed:2.4}},Ot={reach:5},Wt=(.22+.18)*(2/3);function V(){if(typeof navigator>"u")return!1;const r=(navigator.userAgent||"").toLowerCase();return/android|iphone|ipad|ipod|iemobile|mobile|blackberry|bb10|silk|kindle/.test(r)?!0:!!(navigator.platform==="MacIntel"&&(navigator.maxTouchPoints||0)>1)}function ie(){if(typeof navigator>"u")return!1;const r=navigator.userAgent,o=/Safari/i.test(r),s=/Chrome|CriOS|Chromium|Edg|OPR|FxiOS/i.test(r);return o&&!s}const yt="/assets/bg_img-DPvUbRQE.png",vt=[1,9,25,49,81,121,169],St=[{label:"Small (32×64×32)",size:{x:32,y:64,z:32}},{label:"Medium (48×96×48)",size:{x:48,y:96,z:48}},{label:"Large (64×128×64)",size:{x:64,y:128,z:64}}];function wt(){const r=x(i=>i.gameStarted),o=x(i=>i.setGameStarted),s=x(i=>i.chunkCount),l=x(i=>i.setChunkCount),d=x(i=>i.chunkSize),t=x(i=>i.setChunkSize),a=x(i=>i.setLoading),[c,m]=w.useState(s||9),[b,y]=w.useState(d||{x:48,y:96,z:48}),[h,v]=w.useState(!1),B=w.useRef(null);if(w.useEffect(()=>{m(s),y(d)},[s,d]),w.useEffect(()=>{const i=C=>{B.current&&!B.current.contains(C.target)&&v(!1)};return h&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[h]),r)return null;const F=async()=>{if(V()||ie()&&!V()){alert("Please visit it on desktop, and in Chrome or other Chromium browsers.");return}try{a(!0);const i=document.createElement("input");i.type="file",i.accept="application/json",i.oncancel=()=>{a(!1)};const C=()=>{setTimeout(()=>{(!i.files||i.files.length===0)&&a(!1),window.removeEventListener("focus",C)},100)};window.addEventListener("focus",C),i.onchange=async()=>{window.removeEventListener("focus",C);const W=i.files?.[0];if(!W){a(!1);return}const E=await W.text();let f;try{f=JSON.parse(E)}catch{alert("Invalid JSON file."),a(!1);return}const u=f;let n;if(u.kind!=="MyCraftWorld"){alert("Not a MyCraft world save."),a(!1);return}if(u.version!==2||u.encAlg!==xt){alert("Save file version not supported."),a(!1);return}if(u.publicKeyId!==gt||u.signatureAlg!==pt){alert("Save file not recognized (metadata mismatch)."),a(!1);return}if(!u.ivB64||!u.cipherB64||!u.signatureB64){alert("Save file missing fields (iv/cipher/signature)."),a(!1);return}try{n=await mt(u.ivB64,u.cipherB64)}catch(S){console.error("Decryption failed:",S),alert("Save file decryption failed. The file may be corrupted."),a(!1);return}const g=u.signatureB64;if(typeof g!="string"||!g){alert("Save file missing signature."),a(!1);return}try{const S=L(g);if(q(S)!==g){alert("Save signature is malformed (base64 altered)."),a(!1);return}if(!await ft(n,g)){alert("Save signature verification failed (data may be corrupted)."),a(!1);return}}catch(S){console.error("Signature verification error:",S),alert("Unable to verify save signature. The file may be corrupted or browser crypto is unavailable."),a(!1);return}const p=n.settings.chunkSize;if(!p||typeof p.x!="number"||typeof p.y!="number"||typeof p.z!="number"){alert("Save file missing chunk size."),a(!1);return}if(p.x!==A.x||p.y!==A.y||p.z!==A.z){alert(`Save chunk size ${p.x}x${p.y}x${p.z} does not match game chunk size ${A.x}x${A.y}x${A.z}.`),a(!1);return}if(!Array.isArray(n.chunks)||n.chunks.length===0){alert("Save has no chunks."),a(!1);return}const T=p.x*p.y*p.z;for(const S of n.chunks){if(!S||typeof S!="object"){alert("Save chunk entry invalid."),a(!1);return}const{key:_,cx:Q,cy:ge,cz:ue,size:G,voxelsB64:K}=S;if(typeof _!="string"||`${Q},${ge},${ue}`!==_){alert("Save chunk key mismatch."),a(!1);return}if(!G||G.x!==p.x||G.y!==p.y||G.z!==p.z){alert("Save chunk size mismatch."),a(!1);return}if(typeof K!="string"||!K){alert("Save chunk data missing."),a(!1);return}try{if(L(K).length!==T){alert("Save chunk data corrupted (length mismatch)."),a(!1);return}}catch(ee){console.error("Chunk decode error:",ee),alert("Save chunk data is not valid base64."),a(!1);return}}const k=n.inventory;if(k){const S=Array.isArray(k.slots)?k.slots:[];if(S.length!==9){alert("Save inventory invalid (must have 9 slots)."),a(!1);return}if(se(S.map(_=>({blockId:_&&(_.blockId===null||typeof _.blockId=="number")?_.blockId:null,count:Math.max(0,Math.floor(_&&typeof _.count=="number"?_.count:0))}))),typeof k.selectedSlot=="number"){const _=Math.max(0,Math.min(8,Math.floor(k.selectedSlot)));x.getState().setSelectedSlot(_)}}else se(Array.from({length:9},()=>({blockId:null,count:0}))),x.getState().setSelectedSlot(0);window.__WORLD_SNAPSHOT=n,window.__WORLD_SNAPSHOT_VERIFIED=!0,l(n.settings.chunkCount),t(n.settings.chunkSize),o(!0),$(!0),a(!1)},i.click()}catch(i){console.error("Load world failed:",i),alert("Failed to load world save."),a(!1)}},I=V()||ie()&&!V();return e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:`url(${yt})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",color:"#f8f9fa",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(135deg, rgba(26,31,46,0.85) 0%, rgba(15,20,25,0.9) 100%)",backdropFilter:"blur(2px)"}}),e.jsxs("div",{style:{width:"100%",maxWidth:480,margin:"0 16px",padding:"clamp(20px, 5vw, 32px)",borderRadius:16,background:"linear-gradient(145deg, rgba(32,39,49,0.95), rgba(22,27,35,0.95))",border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 20px 60px rgba(0,0,0,0.7), 0 8px 32px rgba(0,0,0,0.4)",backdropFilter:"blur(20px)",position:"relative",zIndex:1,boxSizing:"border-box"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"clamp(16px, 4vw, 24px)",paddingBottom:16,borderBottom:"1px solid rgba(255,255,255,0.06)",flexWrap:"wrap",gap:8},children:[e.jsx("div",{style:{fontSize:"clamp(24px, 6vw, 28px)",fontWeight:800,letterSpacing:-.5,background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"MyCraft"}),e.jsxs("div",{ref:B,style:{position:"relative",display:"flex",alignItems:"center",gap:8},children:[e.jsxs("div",{onClick:()=>v(!h),style:{opacity:1,fontSize:14,fontWeight:700,color:"#e2e8f0",cursor:"pointer",display:"flex",alignItems:"center",gap:6,padding:"6px 12px",borderRadius:8,transition:"all 0.2s ease",userSelect:"none",background:"rgba(148,163,184,0.1)",border:"1px solid rgba(148,163,184,0.2)"},onMouseOver:i=>{i.currentTarget.style.opacity="1",i.currentTarget.style.background="rgba(148,163,184,0.2)",i.currentTarget.style.borderColor="rgba(148,163,184,0.3)",i.currentTarget.style.transform="translateY(-1px)"},onMouseOut:i=>{i.currentTarget.style.opacity="1",i.currentTarget.style.background="rgba(148,163,184,0.1)",i.currentTarget.style.borderColor="rgba(148,163,184,0.2)",i.currentTarget.style.transform="translateY(0)"},children:["Player Control",e.jsx("span",{style:{fontSize:10,transform:h?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:"▼"})]}),h&&e.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:8,minWidth:"clamp(240px, 70vw, 320px)",maxWidth:"min(90vw, 320px)",padding:"clamp(12px, 3vw, 16px)",background:"linear-gradient(145deg, rgba(26,31,46,0.98), rgba(15,20,25,0.98))",border:"1px solid rgba(255,255,255,0.12)",borderRadius:"clamp(8px, 2vw, 12px)",boxShadow:"0 12px 32px rgba(0,0,0,0.6), 0 4px 16px rgba(0,0,0,0.4)",backdropFilter:"blur(20px)",zIndex:10,animation:"fadeIn 0.2s ease-out",transform:"translateX(min(0px, calc(-100% + 100vw - 32px)))"},children:[e.jsx("div",{style:{fontSize:"clamp(11px, 2.5vw, 12px)",fontWeight:600,color:"#e2e8f0",marginBottom:"clamp(8px, 2vw, 12px)",textAlign:"center",letterSpacing:.5},children:"PLAYER CONTROLS"}),e.jsxs("div",{style:{display:"grid",gap:"clamp(16px, 4vw, 20px)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("span",{style:{fontSize:"clamp(12px, 2.8vw, 13px)",color:"#cbd5e1",marginTop:"clamp(8px, 2vw, 12px)"},children:"Movement"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",gap:"clamp(3px, 1vw, 4px)",width:"clamp(90px, 22vw, 108px)",height:"clamp(60px, 14vw, 72px)"},children:[e.jsx("div",{}),e.jsx("kbd",{style:{width:"100%",height:"100%",background:"linear-gradient(145deg, #4b5563, #374151)",color:"#f3f4f6",borderRadius:"clamp(4px, 1vw, 6px)",fontSize:"clamp(10px, 2.2vw, 12px)",fontWeight:700,border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 2px 4px rgba(0,0,0,0.3), inset 0 1px 2px rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:"W"}),e.jsx("div",{}),e.jsx("kbd",{style:{width:"100%",height:"100%",background:"linear-gradient(145deg, #4b5563, #374151)",color:"#f3f4f6",borderRadius:"clamp(4px, 1vw, 6px)",fontSize:"clamp(10px, 2.2vw, 12px)",fontWeight:700,border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 2px 4px rgba(0,0,0,0.3), inset 0 1px 2px rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:"A"}),e.jsx("kbd",{style:{width:"100%",height:"100%",background:"linear-gradient(145deg, #4b5563, #374151)",color:"#f3f4f6",borderRadius:"clamp(4px, 1vw, 6px)",fontSize:"clamp(10px, 2.2vw, 12px)",fontWeight:700,border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 2px 4px rgba(0,0,0,0.3), inset 0 1px 2px rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:"S"}),e.jsx("kbd",{style:{width:"100%",height:"100%",background:"linear-gradient(145deg, #4b5563, #374151)",color:"#f3f4f6",borderRadius:"clamp(4px, 1vw, 6px)",fontSize:"clamp(10px, 2.2vw, 12px)",fontWeight:700,border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 2px 4px rgba(0,0,0,0.3), inset 0 1px 2px rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:"D"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"clamp(12px, 2.8vw, 13px)",color:"#cbd5e1"},children:"Sprint"}),e.jsx("kbd",{style:{padding:"0 clamp(16px, 4vw, 20px)",background:"linear-gradient(145deg, #4b5563, #374151)",color:"#f3f4f6",borderRadius:"clamp(4px, 1vw, 6px)",fontSize:"clamp(10px, 2.2vw, 12px)",fontWeight:700,border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 2px 4px rgba(0,0,0,0.3), inset 0 1px 2px rgba(255,255,255,0.1)",height:"clamp(28px, 7vw, 34px)",display:"flex",alignItems:"center",justifyContent:"center"},children:"SHIFT"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"clamp(12px, 2.8vw, 13px)",color:"#cbd5e1"},children:"Jump / Surface"}),e.jsx("kbd",{style:{padding:"0 clamp(28px, 7vw, 36px)",background:"linear-gradient(145deg, #4b5563, #374151)",color:"#f3f4f6",borderRadius:"clamp(4px, 1vw, 6px)",fontSize:"clamp(10px, 2.2vw, 12px)",fontWeight:700,border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 2px 4px rgba(0,0,0,0.3), inset 0 1px 2px rgba(255,255,255,0.1)",height:"clamp(28px, 7vw, 34px)",minWidth:"clamp(90px, 22vw, 110px)",display:"flex",alignItems:"center",justifyContent:"center"},children:"SPACE"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"clamp(12px, 2.8vw, 13px)",color:"#cbd5e1"},children:"Break Block"}),e.jsxs("div",{style:{position:"relative",width:"clamp(50px, 12vw, 60px)",height:"clamp(35px, 8vw, 42px)",background:"linear-gradient(145deg, #52525b, #3f3f46)",borderRadius:"clamp(15px, 4vw, 18px) clamp(15px, 4vw, 18px) clamp(8px, 2vw, 10px) clamp(8px, 2vw, 10px)",border:"1.5px solid rgba(255,255,255,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.5), inset 0 1px 3px rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"default"},children:[e.jsx("div",{style:{position:"absolute",left:"12%",top:"15%",width:"35%",height:"50%",background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",borderRadius:"clamp(6px, 1.5vw, 8px) clamp(6px, 1.5vw, 8px) clamp(2px, 0.5vw, 3px) clamp(2px, 0.5vw, 3px)",border:"2px solid rgba(79,172,254,0.6)",boxShadow:"inset 0 1px 3px rgba(0,0,0,0.3), 0 0 8px rgba(79,172,254,0.4)"}}),e.jsx("div",{style:{position:"absolute",right:"12%",top:"15%",width:"35%",height:"50%",background:"linear-gradient(145deg, #6b7280, #52525b)",borderRadius:"clamp(6px, 1.5vw, 8px) clamp(6px, 1.5vw, 8px) clamp(2px, 0.5vw, 3px) clamp(2px, 0.5vw, 3px)",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"inset 0 1px 3px rgba(0,0,0,0.3), 0 1px 2px rgba(255,255,255,0.1)"}}),e.jsx("div",{style:{position:"absolute",left:"50%",top:"15%",width:"12%",height:"35%",background:"linear-gradient(145deg, #71717a, #52525b)",borderRadius:"clamp(1px, 0.3vw, 2px)",transform:"translateX(-50%)",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.2)"}})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"clamp(12px, 2.8vw, 13px)",color:"#cbd5e1"},children:"Place Block"}),e.jsxs("div",{style:{position:"relative",width:"clamp(50px, 12vw, 60px)",height:"clamp(35px, 8vw, 42px)",background:"linear-gradient(145deg, #52525b, #3f3f46)",borderRadius:"clamp(15px, 4vw, 18px) clamp(15px, 4vw, 18px) clamp(8px, 2vw, 10px) clamp(8px, 2vw, 10px)",border:"1.5px solid rgba(255,255,255,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.5), inset 0 1px 3px rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"default"},children:[e.jsx("div",{style:{position:"absolute",left:"12%",top:"15%",width:"35%",height:"50%",background:"linear-gradient(145deg, #6b7280, #52525b)",borderRadius:"clamp(6px, 1.5vw, 8px) clamp(6px, 1.5vw, 8px) clamp(2px, 0.5vw, 3px) clamp(2px, 0.5vw, 3px)",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"inset 0 1px 3px rgba(0,0,0,0.3), 0 1px 2px rgba(255,255,255,0.1)"}}),e.jsx("div",{style:{position:"absolute",right:"12%",top:"15%",width:"35%",height:"50%",background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",borderRadius:"clamp(6px, 1.5vw, 8px) clamp(6px, 1.5vw, 8px) clamp(2px, 0.5vw, 3px) clamp(2px, 0.5vw, 3px)",border:"2px solid rgba(79,172,254,0.6)",boxShadow:"inset 0 1px 3px rgba(0,0,0,0.3), 0 0 8px rgba(79,172,254,0.4)"}}),e.jsx("div",{style:{position:"absolute",left:"50%",top:"15%",width:"12%",height:"35%",background:"linear-gradient(145deg, #71717a, #52525b)",borderRadius:"clamp(1px, 0.3vw, 2px)",transform:"translateX(-50%)",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.2)"}})]})]})]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"clamp(16px, 4vw, 24px)"},children:[e.jsxs("label",{style:{display:"grid",gap:12},children:[e.jsx("span",{style:{fontSize:14,fontWeight:600,color:"#e2e8f0",textTransform:"uppercase",letterSpacing:.5},children:"World Size"}),e.jsx("div",{style:{display:"flex",gap:12},children:e.jsx("select",{value:c,onChange:i=>m(Number(i.target.value)),style:{flex:1,padding:"clamp(12px, 3vw, 14px) 16px",background:"linear-gradient(145deg, #1e2532, #151b26)",color:"#f1f5f9",border:"1px solid rgba(148,163,184,0.2)",borderRadius:12,fontSize:"clamp(13px, 3vw, 14px)",fontWeight:500,outline:"none",transition:"all 0.2s ease",cursor:"pointer",minHeight:44},onMouseOver:i=>{i.currentTarget.style.borderColor="rgba(148,163,184,0.4)",i.currentTarget.style.background="linear-gradient(145deg, #232a3a, #1a212e)"},onMouseOut:i=>{i.currentTarget.style.borderColor="rgba(148,163,184,0.2)",i.currentTarget.style.background="linear-gradient(145deg, #1e2532, #151b26)"},children:vt.map(i=>e.jsxs("option",{value:i,style:{background:"#1e2532",color:"#f1f5f9"},children:[i," chunks (",Math.sqrt(i),"×",Math.sqrt(i)," grid)"]},i))})}),e.jsx("div",{style:{fontSize:12,color:"#64748b",fontStyle:"italic",lineHeight:1.4},children:"Start with 9 chunks. Larger worlds may impact performance depending on your device."})]}),e.jsxs("label",{style:{display:"grid",gap:12},children:[e.jsx("span",{style:{fontSize:14,fontWeight:600,color:"#e2e8f0",textTransform:"uppercase",letterSpacing:.5},children:"Chunk Size"}),e.jsx("div",{style:{display:"flex",gap:12},children:e.jsx("select",{value:JSON.stringify(b),onChange:i=>y(JSON.parse(i.target.value)),style:{flex:1,padding:"clamp(12px, 3vw, 14px) 16px",background:"linear-gradient(145deg, #1e2532, #151b26)",color:"#f1f5f9",border:"1px solid rgba(148,163,184,0.2)",borderRadius:12,fontSize:"clamp(13px, 3vw, 14px)",fontWeight:500,outline:"none",transition:"all 0.2s ease",cursor:"pointer",minHeight:44},onMouseOver:i=>{i.currentTarget.style.borderColor="rgba(148,163,184,0.4)",i.currentTarget.style.background="linear-gradient(145deg, #232a3a, #1a212e)"},onMouseOut:i=>{i.currentTarget.style.borderColor="rgba(148,163,184,0.2)",i.currentTarget.style.background="linear-gradient(145deg, #1e2532, #151b26)"},children:St.map(i=>e.jsx("option",{value:JSON.stringify(i.size),style:{background:"#1e2532",color:"#f1f5f9"},children:i.label},i.label))})}),e.jsx("div",{style:{fontSize:12,color:"#64748b",fontStyle:"italic",lineHeight:1.4},children:"Chunk size affects world detail and performance."})]}),e.jsx("button",{onClick:()=>{if(I){alert("Please visit it on desktop, and in Chrome or other Chromium browsers.");return}l(c),t(b),o(!0),$(!0)},style:{padding:"clamp(12px, 3vw, 16px) clamp(20px, 5vw, 24px)",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff",border:"none",borderRadius:12,cursor:"pointer",fontWeight:700,fontSize:"clamp(14px, 3.5vw, 16px)",letterSpacing:.5,textTransform:"uppercase",boxShadow:"0 8px 24px rgba(102,126,234,0.4), 0 4px 12px rgba(118,75,162,0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none",position:"relative",overflow:"hidden",minHeight:48},onMouseOver:i=>{i.currentTarget.style.transform="translateY(-2px)",i.currentTarget.style.boxShadow="0 12px 32px rgba(102,126,234,0.5), 0 6px 16px rgba(118,75,162,0.4)"},onMouseOut:i=>{i.currentTarget.style.transform="translateY(0)",i.currentTarget.style.boxShadow="0 8px 24px rgba(102,126,234,0.4), 0 4px 12px rgba(118,75,162,0.3)"},onMouseDown:i=>{i.currentTarget.style.transform="translateY(0) scale(0.98)"},onMouseUp:i=>{i.currentTarget.style.transform="translateY(-2px) scale(1)"},children:"Launch New World"}),e.jsxs("div",{style:{marginTop:"clamp(16px, 4vw, 24px)",padding:"clamp(16px, 4vw, 20px)",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.06)",borderRadius:12,display:"grid",gap:16,position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:-8,left:16,background:"linear-gradient(145deg, rgba(32,39,49,0.95), rgba(22,27,35,0.95))",padding:"4px 12px",borderRadius:8,fontSize:11,fontWeight:600,color:"#f5576c",letterSpacing:.5,border:"1px solid rgba(255,255,255,0.06)"},children:"Alternatively"}),e.jsx("div",{style:{fontSize:12,color:"#64748b",fontStyle:"italic",lineHeight:1.4},children:'You can also load a world saved by yourself or others. Click "Load Saved World", and select the saved JSON file.'}),e.jsx("button",{onClick:F,style:{padding:"clamp(12px, 3vw, 16px) clamp(20px, 5vw, 24px)",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"#fff",border:"none",borderRadius:12,cursor:"pointer",fontWeight:700,fontSize:"clamp(14px, 3.5vw, 16px)",letterSpacing:.5,textTransform:"uppercase",boxShadow:"0 8px 24px rgba(240,147,251,0.4), 0 4px 12px rgba(245,87,108,0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none",position:"relative",overflow:"hidden",minHeight:48},onMouseOver:i=>{i.currentTarget.style.transform="translateY(-2px)",i.currentTarget.style.boxShadow="0 12px 32px rgba(240,147,251,0.5), 0 6px 16px rgba(245,87,108,0.4)"},onMouseOut:i=>{i.currentTarget.style.transform="translateY(0)",i.currentTarget.style.boxShadow="0 8px 24px rgba(240,147,251,0.4), 0 4px 12px rgba(245,87,108,0.3)"},onMouseDown:i=>{i.currentTarget.style.transform="translateY(0) scale(0.98)"},onMouseUp:i=>{i.currentTarget.style.transform="translateY(-2px) scale(1)"},children:"Load Saved World"})]})]})]})]})}function jt(){return x(o=>o.loading)?e.jsxs("div",{style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.75)",backdropFilter:"blur(8px)",zIndex:9999,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",padding:"32px",background:"linear-gradient(145deg, rgba(32,39,49,0.95), rgba(22,27,35,0.95))",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0,0,0,0.7), 0 8px 32px rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid rgba(255,255,255,0.1)",borderTop:"4px solid #4facfe",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{color:"#f8f9fa",fontSize:"16px",fontWeight:600,letterSpacing:"0.5px"},children:"Loading..."})]}),e.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]}):null}function kt(){const r=x(s=>s.gameStarted),o=x(s=>s.inGame);return!r||o?null:e.jsx("div",{style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)",color:"#ffffff",fontSize:"24px",fontWeight:"bold",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',textAlign:"center",pointerEvents:"none",zIndex:1e3},children:"Click to Enter"})}function Ct(){return e.jsxs(e.Fragment,{children:[e.jsx(Ve,{}),e.jsx(wt,{}),e.jsx(kt,{}),e.jsx(ot,{}),e.jsx(at,{}),e.jsx(st,{}),e.jsx(it,{}),e.jsx(ct,{}),e.jsx(lt,{}),e.jsx(jt,{})]})}xe.createRoot(document.getElementById("root")).render(e.jsx(w.StrictMode,{children:e.jsx(Ct,{})}));export{A as C,Ot as I,Ft as P,Wt as S,zt as a,q as b,Et as c,_t as d,Mt as e,gt as f,Rt as g,pt as h,xt as i,It as s,x as u};
